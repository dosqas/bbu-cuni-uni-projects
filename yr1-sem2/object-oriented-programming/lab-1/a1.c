#include <stdio.h>

int prime(int number)
{
	/*
	This function checks if a number is prime or not.
	- input: number - integer
	- output: 1 if the number is prime, 0 otherwise
	*/
	if (number < 2)
		return 0;
	if (number == 2)
		return 1;
	if (number % 2 == 0)
		return 0;
	for (int cnt = 3; cnt * cnt <= number; cnt+=2)
		if (number % cnt == 0)
			return 0;

	return 1;
}

void option_one(int vector_p1[], int* p1_length)
{
	/*
	Option one from the menu. User inputs a vector of numbers.
	- input: vector_p1 - array of integers, p1_length - pointer to integer(the length of the array)
	*/
	printf("\nEnter the number of numbers you will input:\n");
	(void)scanf("%d", p1_length);

	printf("Start inputting the numbers.\n");
	for (int cnt = 0; cnt < *p1_length; cnt++)
	{
		printf("Enter:");
		int current_value;
		(void)scanf("%d", &current_value);
		vector_p1[cnt] = current_value;
	}
	printf("Finished succesfully!\n\n");

}

void option_two(int vector_p2[], int* p2_length)
{
	/*
	Option two from the menu. User inputs a 0-ended sequence of numbers and the function determines the number of 0 digits of the product of them.
	- input: vector_p2 - array of integers, p2_length - pointer to integer(the length of the array)
	- output: the number of 0 digits of the product of the numbers
	*/
	int current_length = 0, product = 1;
	printf("\nStart inputting the numbers. When done, enter a 0.\n");
	while (1)
	{
		printf("Enter:");
		int current_value;
		(void)scanf("%d", &current_value);
		if (current_value == 0)
			break;
		vector_p2[current_length] = current_value;
		product *= current_value;
	}

	int nr_of_0 = 0, curr_digit;
	while (product > 0)
	{
		curr_digit = product % 10;
		if (curr_digit == 0)
			nr_of_0++;
		product /= 10;
	}


	printf("Finished succesfully!\nNr. of 0's from product of numbers is %d\n\n", nr_of_0);
	*p2_length = current_length;
}

void option_three(int vector_p1[], int p1_length)
{
	/*
	Option three from the menu. The function finds the longest contiguous subsequence of the vector from point [1] where the sum of any two consecutive elements is a prime.
	- input: vector_p1 - array of integers, p1_length - integer(the length of the array)
	- output: the longest contiguous subsequence of the vector from point [1] where the sum of any two consecutive elements is a prime.
	*/
	int max_so_far = 0, max_ending_here = 0, start = 0, end = 0, s = 0;
	for (int i = 0; i < p1_length-1; i++)
	{
		if (prime(vector_p1[i] + vector_p1[i+1]))
		{
			max_ending_here += 1;
			if (max_so_far < max_ending_here)
			{
				max_so_far = max_ending_here;
				start = s;
				end = i + 1;
			}
		}
		else
		{
				max_ending_here = 0;
				s = i + 1;
		}
	}

	printf("\nThe longest contiguous subsesquence of numbers with the requested property is:");
	for (int i = start; i <= end; i++)
	{
		printf("%d ", vector_p1[i]);
	}
	printf("\n\n");

}

void option_four()
{
	/*
	Option four from the menu. The function quits the program.
	- output: the program is closed
	*/
	printf("\nGoodbye!");
	exit(0);
}


int main()
{
		printf("????????????????????????????????????????????????\n");
		printf("????????????????????????????????????????????????\n");
		printf("????????????????????????????????????????????????\n");
		printf("??????????????????????????????????????????????????\n");
		printf("??????????????????????????????????????????????????\n");
		printf("??????????????????????????????????????????????????\n");
		printf("??????????????????????????????????????????????????\n");
		printf("??????????????????????????????????????????????????\n");
		printf("??????????????????????????????????????????????????\n");
		printf("??????????????????????????????????????????????????\n");
		printf("?????????????????????????????????????????????????\n");
		printf("????????????????????????????????????????????????\n");
		printf("????????????????????????????????????????????????\n");
		printf("?????????????????????????????????????????????????\n");
		printf("?????????????????????????????????????????????????\n");
		printf("??????????????????\n");
	int menu_option, vector_p1[200], vector_p2[200], p1_length = 0, p2_length = 0;
	while (1)
	{
		printf("Hello! This is the menu.\n[1]Input a vector of numbers.\n");
		printf("[2]Input a 0-ended sequence of numbers for determining the number of 0 digits of the product of them.\n");
		printf("[3]Find the longest contiguous subsequence of the vector from point [1] where the sum of any two consecutive elements is a prime.\n");
		printf("[4] Quit.\n\n");

		printf("Enter input:");
		(void)scanf("%d", &menu_option);

		switch (menu_option)
		{
			case 1:
			{
				option_one(vector_p1, &p1_length);
				break;
			}
			case 2:
			{
				option_two(vector_p2, &p2_length);
				break;
			}
			case 3:
			{
				option_three(vector_p1, p1_length);
				break;
			}
			case 4:
			{
				option_four();
				break;
			}
		}
	}


	return 0;
}